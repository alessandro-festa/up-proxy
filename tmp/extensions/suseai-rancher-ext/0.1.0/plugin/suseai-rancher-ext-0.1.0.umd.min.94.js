(("undefined"!==typeof self?self:this)["webpackChunksuseai_rancher_ext_0_1_0"]=("undefined"!==typeof self?self:this)["webpackChunksuseai_rancher_ext_0_1_0"]||[]).push([[94],{16:function(e,t,a){"use strict";a.r(t);var r=a(6758),o=a.n(r),l=a(935),n=a.n(l),s=n()(o());s.push([e.id,".users-table-container[data-v-7739c31d]{width:100%}.table-header[data-v-7739c31d]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.table-header h3[data-v-7739c31d]{margin:0;color:var(--text)}.table-actions[data-v-7739c31d]{display:flex;gap:10px;align-items:center}.search-input[data-v-7739c31d]{padding:8px 12px;border:1px solid var(--border);border-radius:4px;background:var(--input-bg);color:var(--text);min-width:200px}.search-input[data-v-7739c31d]:focus{outline:none;border-color:var(--primary)}.empty-state[data-v-7739c31d],.error-state[data-v-7739c31d],.loading-state[data-v-7739c31d]{text-align:center;padding:40px 20px;color:var(--text-muted)}.loading-spinner[data-v-7739c31d]{width:24px;height:24px;border:2px solid var(--border);border-top:2px solid var(--primary);border-radius:50%;animation:spin-7739c31d 1s linear infinite;margin:0 auto 10px}@keyframes spin-7739c31d{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.error-message[data-v-7739c31d]{color:var(--error);margin-bottom:10px}.table-wrapper[data-v-7739c31d]{background:var(--card-bg);border-radius:8px;overflow:hidden;box-shadow:var(--card-shadow)}.users-table[data-v-7739c31d]{width:100%;border-collapse:collapse}.users-table td[data-v-7739c31d],.users-table th[data-v-7739c31d]{padding:12px 16px;text-align:left;border-bottom:1px solid var(--border)}.users-table th[data-v-7739c31d]{background:var(--sortable-table-header-bg);font-weight:600;color:var(--text);position:sticky;top:0}.users-table th.sortable[data-v-7739c31d]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.users-table th.sortable[data-v-7739c31d]:hover{background:var(--hover-bg)}.sort-indicator[data-v-7739c31d]{margin-left:5px;font-size:12px}.user-row[data-v-7739c31d]{cursor:pointer;transition:background-color .2s}.user-row[data-v-7739c31d]:hover{background:var(--sortable-table-accent-bg)}.status-badge[data-v-7739c31d]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.status-enabled[data-v-7739c31d]{background:var(--success-bg);color:var(--success)}.status-disabled[data-v-7739c31d]{background:var(--error-bg);color:var(--error)}.actions-cell[data-v-7739c31d]{white-space:nowrap}.actions-cell .btn[data-v-7739c31d]{margin-right:5px}.pagination[data-v-7739c31d]{display:flex;justify-content:center;align-items:center;gap:10px;padding:16px;background:var(--card-bg);border-top:1px solid var(--border)}.page-info[data-v-7739c31d]{color:var(--text-muted);font-size:14px}.btn[data-v-7739c31d]{padding:6px 12px;border:1px solid var(--border);border-radius:4px;background:var(--button-bg);color:var(--button-text);cursor:pointer;font-size:14px;transition:all .2s}.btn[data-v-7739c31d]:hover:not(:disabled){background:var(--button-hover-bg)}.btn[data-v-7739c31d]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[data-v-7739c31d]{background:var(--primary);color:#fff;border-color:var(--primary)}.btn-outline[data-v-7739c31d]{background:transparent;border-color:var(--border)}.btn-outline[data-v-7739c31d]:hover{background:var(--hover-bg)}.btn-sm[data-v-7739c31d]{padding:4px 8px;font-size:12px}.btn-secondary[data-v-7739c31d]{background:var(--secondary);color:var(--secondary-text)}",""]),t["default"]=s},1518:function(e,t,a){var r=a(6089);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(4825).A;o("4d8c116c",r,!0,{sourceMap:!1,shadowMode:!1})},1670:function(e,t,a){var r=a(3622);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(4825).A;o("4afa1d08",r,!0,{sourceMap:!1,shadowMode:!1})},3622:function(e,t,a){"use strict";a.r(t);var r=a(6758),o=a.n(r),l=a(935),n=a.n(l),s=n()(o());s.push([e.id,".settings-page[data-v-4be39728]{padding:20px}.fixed-header[data-v-4be39728]{margin-bottom:20px}.page-description[data-v-4be39728]{color:var(--text-muted);margin:5px 0 0 0;font-size:14px}.main-content[data-v-4be39728]{margin-top:20px}.tabs-container[data-v-4be39728]{background:var(--card-bg);border-radius:8px;box-shadow:var(--card-shadow)}.tab-nav[data-v-4be39728]{display:flex;border-bottom:1px solid var(--border)}.tab-button[data-v-4be39728]{padding:12px 24px;background:none;border:none;cursor:pointer;font-size:14px;font-weight:500;color:var(--text-muted);border-bottom:2px solid transparent;transition:all .2s ease}.tab-button[data-v-4be39728]:hover{color:var(--text);background:var(--hover-bg)}.tab-button.active[data-v-4be39728]{color:var(--primary);border-bottom-color:var(--primary)}.tab-content[data-v-4be39728]{padding:20px}.access-denied[data-v-4be39728],.tab-pane[data-v-4be39728]{min-height:400px}.access-denied[data-v-4be39728]{display:flex;align-items:center;justify-content:center;padding:40px 20px}.access-denied-content[data-v-4be39728]{text-align:center;max-width:400px}.access-denied-content h2[data-v-4be39728]{color:var(--error);margin-bottom:16px}.access-denied-content p[data-v-4be39728]{color:var(--text-muted);margin-bottom:8px;line-height:1.5}.debug-section[data-v-4be39728]{margin-top:20px;border:1px solid var(--border);border-radius:4px}.debug-section summary[data-v-4be39728]{padding:10px;cursor:pointer;background:var(--hover-bg);border-radius:4px;font-weight:500}.debug-content[data-v-4be39728]{padding:15px;background:var(--card-bg);border-radius:0 0 4px 4px}.debug-item[data-v-4be39728]{margin-bottom:15px}.debug-item[data-v-4be39728]:last-child{margin-bottom:0}.debug-item strong[data-v-4be39728]{color:var(--text);display:block;margin-bottom:5px}.debug-item pre[data-v-4be39728]{overflow-x:auto;font-size:12px;max-height:200px;overflow-y:auto}.debug-item pre[data-v-4be39728],.debug-item ul[data-v-4be39728]{background:var(--input-bg);padding:10px;border-radius:4px}.debug-item ul[data-v-4be39728]{margin:0}.debug-item li[data-v-4be39728]{font-family:monospace;font-size:12px;color:var(--text-muted)}",""]),t["default"]=s},3871:function(e,t,a){"use strict";a.r(t);var r=a(6758),o=a.n(r),l=a(935),n=a.n(l),s=n()(o());s.push([e.id,".modal-overlay[data-v-b7f498e2]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[data-v-b7f498e2]{background:var(--card-bg);border-radius:8px;box-shadow:var(--card-shadow);max-width:700px;width:100%;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-header[data-v-b7f498e2]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid var(--border)}.modal-header h2[data-v-b7f498e2]{margin:0;color:var(--text)}.close-btn[data-v-b7f498e2]{background:none;border:none;font-size:24px;cursor:pointer;color:var(--text-muted);padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color .2s}.close-btn[data-v-b7f498e2]:hover{background:var(--hover-bg);color:var(--text)}.modal-body[data-v-b7f498e2]{padding:20px;overflow-y:auto;flex:1}.modal-footer[data-v-b7f498e2]{padding:20px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:10px}.role-details[data-v-b7f498e2]{display:flex;flex-direction:column;gap:24px}.detail-section h3[data-v-b7f498e2]{margin:0 0 16px 0;color:var(--text);font-size:16px;font-weight:600}.detail-grid[data-v-b7f498e2]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.detail-item[data-v-b7f498e2]{display:flex;flex-direction:column;gap:4px}.detail-item label[data-v-b7f498e2]{font-weight:500;color:var(--text-muted);font-size:14px}.detail-item span[data-v-b7f498e2]{color:var(--text)}.type-badge[data-v-b7f498e2]{display:inline-block;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.type-global[data-v-b7f498e2]{background:var(--primary-bg);color:var(--primary)}.type-cluster[data-v-b7f498e2]{background:var(--warning-bg);color:var(--warning)}.type-project[data-v-b7f498e2]{background:var(--success-bg);color:var(--success)}.type-namespaced[data-v-b7f498e2]{background:var(--info-bg);color:var(--info)}.rules-list[data-v-b7f498e2]{display:flex;flex-direction:column;gap:16px}.rule-item[data-v-b7f498e2]{background:var(--input-bg);border-radius:6px;padding:16px;border:1px solid var(--border)}.rule-header[data-v-b7f498e2]{margin-bottom:12px;color:var(--text)}.rule-details[data-v-b7f498e2]{display:flex;flex-direction:column;gap:8px}.rule-row[data-v-b7f498e2]{display:flex;gap:8px;align-items:flex-start}.rule-label[data-v-b7f498e2]{font-weight:500;color:var(--text-muted);font-size:14px;min-width:120px;flex-shrink:0}.rule-value[data-v-b7f498e2]{color:var(--text);font-family:monospace;font-size:14px;word-break:break-word}.assigned-users[data-v-b7f498e2]{display:flex;flex-direction:column;gap:8px}.assigned-user[data-v-b7f498e2]{background:var(--input-bg);padding:8px 12px;border-radius:4px;color:var(--text);font-size:14px}.more-users[data-v-b7f498e2]{padding:4px 12px}.more-users[data-v-b7f498e2],.no-data[data-v-b7f498e2]{color:var(--text-muted);font-style:italic}.no-data[data-v-b7f498e2]{margin:0}.role-form[data-v-b7f498e2]{gap:20px}.form-group[data-v-b7f498e2],.role-form[data-v-b7f498e2]{display:flex;flex-direction:column}.form-group[data-v-b7f498e2]{gap:8px}.form-group label[data-v-b7f498e2]{font-weight:500;color:var(--text)}.form-input[data-v-b7f498e2],.form-select[data-v-b7f498e2]{padding:8px 12px;border:1px solid var(--border);border-radius:4px;background:var(--input-bg);color:var(--text);font-size:14px}.form-input[data-v-b7f498e2]:focus,.form-select[data-v-b7f498e2]:focus{outline:none;border-color:var(--primary)}.form-input[data-v-b7f498e2]:disabled,.form-select[data-v-b7f498e2]:disabled{background:var(--disabled-bg);color:var(--text-muted);cursor:not-allowed}.btn[data-v-b7f498e2],.form-select[data-v-b7f498e2]{cursor:pointer}.btn[data-v-b7f498e2]{padding:8px 16px;border:1px solid var(--border);border-radius:4px;background:var(--button-bg);color:var(--button-text);font-size:14px;transition:all .2s}.btn[data-v-b7f498e2]:hover:not(:disabled){background:var(--button-hover-bg)}.btn[data-v-b7f498e2]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[data-v-b7f498e2]{background:var(--primary);color:#fff;border-color:var(--primary)}.btn-secondary[data-v-b7f498e2]{background:var(--secondary);color:var(--secondary-text)}.btn-outline[data-v-b7f498e2]{background:transparent;border-color:var(--border)}.btn-outline[data-v-b7f498e2]:hover{background:var(--hover-bg)}",""]),t["default"]=s},4094:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ea}});var r=a(9274);const o={class:"settings-page"},l={key:0,class:"access-denied"},n={class:"access-denied-content"},s={key:0},d={key:1},i={class:"debug-section"},c={class:"debug-content"},u={class:"debug-item"},p={class:"debug-item"},m={class:"debug-item"},v={class:"debug-item"},b={class:"debug-item"},g={class:"debug-item"},f={key:1},h={class:"main-content"},y={class:"tabs-container"},k={class:"tab-nav"},x=["onClick"],E={class:"tab-content"},N={key:0,class:"tab-pane"},V={key:1,class:"tab-pane"};function w(e,t,a,w,B,D){const C=(0,r.resolveComponent)("UsersTable"),S=(0,r.resolveComponent)("RolesTable"),U=(0,r.resolveComponent)("UserDetailsModal"),A=(0,r.resolveComponent)("RoleDetailsModal");return(0,r.openBlock)(),(0,r.createElementBlock)("div",o,[e.isAuthenticated&&e.hasAdminPrivileges?((0,r.openBlock)(),(0,r.createElementBlock)("div",f,[t[11]||(t[11]=(0,r.createElementVNode)("header",{class:"fixed-header"},[(0,r.createElementVNode)("div",{class:"title"},[(0,r.createElementVNode)("h1",{class:"m-0",id:"page-title"},"Settings"),(0,r.createElementVNode)("p",{class:"page-description"},"Manage users, roles, and authentication settings")])],-1)),(0,r.createElementVNode)("div",h,[(0,r.createElementVNode)("div",y,[(0,r.createElementVNode)("div",k,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.tabs,t=>((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:t.id,class:(0,r.normalizeClass)(["tab-button",{active:e.activeTab===t.id}]),onClick:a=>e.activeTab=t.id},(0,r.toDisplayString)(t.label),11,x))),128))]),(0,r.createElementVNode)("div",E,["users"===e.activeTab?((0,r.openBlock)(),(0,r.createElementBlock)("div",N,[(0,r.createVNode)(C,{users:e.users,loading:e.loadingUsers,error:e.usersError||void 0,"can-manage-users":e.hasAdminPrivileges,onViewUser:e.handleViewUser,onEditUser:e.handleEditUser,onAddUser:e.handleAddUser,onRetry:e.loadUsers},null,8,["users","loading","error","can-manage-users","onViewUser","onEditUser","onAddUser","onRetry"])])):(0,r.createCommentVNode)("",!0),"roles"===e.activeTab?((0,r.openBlock)(),(0,r.createElementBlock)("div",V,[(0,r.createVNode)(S,{roles:e.roles,loading:e.loadingRoles,error:e.rolesError||void 0,"can-manage-roles":e.hasAdminPrivileges,onViewRole:e.handleViewRole,onEditRole:e.handleEditRole,onAddRole:e.handleAddRole,onRetry:e.loadRoles},null,8,["roles","loading","error","can-manage-roles","onViewRole","onEditRole","onAddRole","onRetry"])])):(0,r.createCommentVNode)("",!0)])])]),e.showUserModal?((0,r.openBlock)(),(0,r.createBlock)(U,{key:0,user:e.selectedUser,show:e.showUserModal,"can-edit-user":e.hasAdminPrivileges,onClose:t[0]||(t[0]=t=>e.showUserModal=!1),onSave:e.handleSaveUser},null,8,["user","show","can-edit-user","onSave"])):(0,r.createCommentVNode)("",!0),e.showRoleModal?((0,r.openBlock)(),(0,r.createBlock)(A,{key:1,role:e.selectedRole,show:e.showRoleModal,"can-edit-role":e.hasAdminPrivileges,onClose:t[1]||(t[1]=t=>e.showRoleModal=!1),onSave:e.handleSaveRole},null,8,["role","show","can-edit-role","onSave"])):(0,r.createCommentVNode)("",!0)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",l,[(0,r.createElementVNode)("div",n,[t[9]||(t[9]=(0,r.createElementVNode)("h2",null,"Access Denied",-1)),t[10]||(t[10]=(0,r.createElementVNode)("p",null,"You need administrator privileges to access the Settings page.",-1)),e.isAuthenticated?e.currentUser?((0,r.openBlock)(),(0,r.createElementBlock)("p",d,"Current user: "+(0,r.toDisplayString)(e.currentUser.displayName||e.currentUser.username),1)):(0,r.createCommentVNode)("",!0):((0,r.openBlock)(),(0,r.createElementBlock)("p",s,"Please log in with an administrator account.")),(0,r.createElementVNode)("details",i,[t[8]||(t[8]=(0,r.createElementVNode)("summary",null,"ðŸ” Authentication Debug Info (Click to expand)",-1)),(0,r.createElementVNode)("div",c,[(0,r.createElementVNode)("div",u,[t[2]||(t[2]=(0,r.createElementVNode)("strong",null,"Is Authenticated:",-1)),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.debugInfo.isAuthenticated),1)]),(0,r.createElementVNode)("div",p,[t[3]||(t[3]=(0,r.createElementVNode)("strong",null,"Has Admin Privileges:",-1)),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.debugInfo.hasAdminPrivileges),1)]),(0,r.createElementVNode)("div",m,[t[4]||(t[4]=(0,r.createElementVNode)("strong",null,"Current User:",-1)),(0,r.createElementVNode)("pre",null,(0,r.toDisplayString)(JSON.stringify(e.debugInfo.currentUser,null,2)),1)]),(0,r.createElementVNode)("div",v,[t[5]||(t[5]=(0,r.createElementVNode)("strong",null,"Available Auth Getters:",-1)),(0,r.createElementVNode)("ul",null,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.debugInfo.availableGetters,e=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{key:e},(0,r.toDisplayString)(e),1))),128))])]),(0,r.createElementVNode)("div",b,[t[6]||(t[6]=(0,r.createElementVNode)("strong",null,"Store State (Auth):",-1)),(0,r.createElementVNode)("pre",null,(0,r.toDisplayString)(JSON.stringify(e.debugInfo.storeState?.auth,null,2)),1)]),(0,r.createElementVNode)("div",g,[t[7]||(t[7]=(0,r.createElementVNode)("strong",null,"Store State (Management):",-1)),(0,r.createElementVNode)("pre",null,(0,r.toDisplayString)(JSON.stringify(e.debugInfo.storeState?.management,null,2)),1)])])])])]))])}var B=a(5359),D=a(4364);function C(e,t,a){return(t=S(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e){var t=U(e,"string");return"symbol"==typeof t?t:t+""}function U(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}class A{constructor(e){C(this,"store",void 0),this.store=e}async getUsers(){try{const e=await this.store.dispatch("rancher/request",{url:"/v3/users",method:"GET"});return e.data||[]}catch(e){throw D.error("Failed to fetch users:",e),new Error("Unable to load users")}}async getUser(e){try{const t=await this.store.dispatch("rancher/request",{url:`/v3/users/${e}`,method:"GET"});return t.data}catch(t){throw D.error(`Failed to fetch user ${e}:`,t),new Error("Unable to load user details")}}async updateUser(e,t){try{const a=await this.store.dispatch("rancher/request",{url:`/v3/users/${e}`,method:"PUT",data:t});return a.data}catch(a){throw D.error(`Failed to update user ${e}:`,a),new Error("Unable to update user")}}async getGlobalRoles(){try{const e=await this.store.dispatch("rancher/request",{url:"/v3/globalRoles",method:"GET"});return e.data||[]}catch(e){throw D.error("Failed to fetch global roles:",e),new Error("Unable to load roles")}}async getClusterRoles(){try{const e=await this.store.dispatch("rancher/request",{url:"/v3/roletemplates?context=cluster",method:"GET"});return e.data||[]}catch(e){throw D.error("Failed to fetch cluster roles:",e),new Error("Unable to load cluster roles")}}async getProjectRoles(){try{const e=await this.store.dispatch("rancher/request",{url:"/v3/roletemplates?context=project",method:"GET"});return e.data||[]}catch(e){throw D.error("Failed to fetch project roles:",e),new Error("Unable to load project roles")}}async getRole(e){try{const t=await this.store.dispatch("rancher/request",{url:`/v3/globalRoles/${e}`,method:"GET"});return t.data}catch(t){throw D.error(`Failed to fetch role ${e}:`,t),new Error("Unable to load role details")}}async getAuthProviders(){try{const e=await this.store.dispatch("rancher/request",{url:"/v3/authConfigs",method:"GET"});return e.data||[]}catch(e){throw D.error("Failed to fetch auth providers:",e),new Error("Unable to load authentication providers")}}getCurrentUser(){const e=["auth/user","management/auth/user","rancher/auth/user","auth/principal","management/auth/principal","auth/v3User","management/auth/v3User"];D.log("ðŸ” [AuthService] Looking for current user...");for(const a of e)try{const e=this.store.getters[a];if(e&&(e.id||e.username||e.principalId||e.loginName))return D.log(`âœ… [AuthService] Found user via getter '${a}':`,e),this.normalizeUserObject(e)}catch(t){D.log(`âŒ [AuthService] Getter '${a}' not available or failed:`,t?.message||t)}return D.warn("âŒ [AuthService] No valid user found via any getter path"),this.getCurrentUserViaAPI().then(e=>{e?D.log("âœ… [AuthService] Found user via API fallback:",e):D.log("âŒ [AuthService] No user found via API fallback either")}).catch(e=>{D.error("âŒ [AuthService] API fallback failed:",e)}),null}normalizeUserObject(e){D.log("ðŸ”„ [AuthService] Normalizing user object:",e);const t={id:e.id||e.principalId||e.username||`user-${Date.now()}`,name:e.name||e.username||e.loginName||"unknown",username:e.username||e.loginName||e.name||"unknown",displayName:e.displayName||e.name||e.username||"Unknown User",description:e.description||"",enabled:!1!==e.enabled,principalIds:Array.isArray(e.principalIds)?e.principalIds:e.principalId?[e.principalId]:[],created:e.created||e.createdAt||(new Date).toISOString(),lastLogin:e.lastLogin||e.lastLoginAt||void 0,mustChangePassword:e.mustChangePassword,password:e.password,annotations:e.annotations||{},labels:e.labels||{}};return D.log("âœ… [AuthService] Normalized user:",t),t}async getCurrentUserViaAPI(){try{D.log("ðŸ” [AuthService] Trying API fallback for current user...");const e=await this.store.dispatch("rancher/request",{url:"/v3/users?me=true",method:"GET"});if(e.data&&e.data.length>0){const t=e.data[0];return D.log("âœ… [AuthService] API returned user:",t),this.normalizeUserObject(t)}return D.log("âŒ [AuthService] API returned no users"),null}catch(e){return D.error("âŒ [AuthService] API fallback failed:",e),null}}hasAdminPrivileges(){try{const e=this.getCurrentUser();if(!e)return D.log("âŒ [AuthService] No user found for admin check"),!1;D.log("ðŸ” [AuthService] Checking admin privileges for user:",e);const t=[()=>{const t=e.principalIds?.some(e=>e.includes("admin")||e.includes("Admin")||"local://user-admin"===e||e.includes("local://user-admin"));return D.log("ðŸ” [AuthService] Admin principal check:",t,e.principalIds),t},()=>{const t="admin"===e.username||"Admin"===e.username||"admin"===e.name||"Admin"===e.name;return D.log("ðŸ” [AuthService] Admin username check:",t,e.username,e.name),t},()=>{const t="true"===e.annotations?.["authz.management.cattle.io/admin"]||"true"===e.labels?.["authz.management.cattle.io/admin"];return D.log("ðŸ” [AuthService] Admin annotation check:",t,e.annotations,e.labels),t},()=>{const t="user-admin"===e.id||"admin"===e.id||e.id?.includes("admin");return D.log("ðŸ” [AuthService] Admin ID check:",t,e.id),t}],a=t.some(e=>{try{return e()}catch(t){return D.warn("âš ï¸ [AuthService] Admin check failed:",t),!1}});return D.log("âœ… [AuthService] Final admin privilege result:",a),a}catch(e){return D.error("âŒ [AuthService] Failed to check admin privileges:",e),!1}}async getAccessibleClusters(){try{const e=await this.store.dispatch("rancher/request",{url:"/v3/clusters",method:"GET"}),t=e.data||[];return t.map(e=>({clusterId:e.id,name:e.name,permissions:{read:!0,write:this.hasAdminPrivileges(),admin:this.hasAdminPrivileges()}}))}catch(e){throw D.error("Failed to fetch accessible clusters:",e),new Error("Unable to load cluster access information")}}async getUserPermissions(e){try{const t=await this.getUser(e),a=t.principalIds.some(e=>e.includes(":admin"));return{global:a?[{resource:"*",verbs:["*"]}]:[],cluster:{},project:{}}}catch(t){throw D.error(`Failed to get permissions for user ${e}:`,t),new Error("Unable to load user permissions")}}async assignRoleToUser(e,t,a){try{const r={userId:e,roleTemplateId:t,type:"roleTemplateBinding"};a?.clusterId&&(r.clusterId=a.clusterId),a?.projectId&&(r.projectId=a.projectId),await this.store.dispatch("rancher/request",{url:"/v3/roleTemplateBindings",method:"POST",data:r})}catch(r){throw D.error(`Failed to assign role ${t} to user ${e}:`,r),new Error("Unable to assign role to user")}}async removeRoleFromUser(e,t,a){try{const r=await this.store.dispatch("rancher/request",{url:"/v3/roleTemplateBindings",method:"GET",params:{userId:e,roleTemplateId:t,...a?.clusterId&&{clusterId:a.clusterId},...a?.projectId&&{projectId:a.projectId}}}),o=r.data||[];if(0===o.length)throw new Error("Role binding not found");await this.store.dispatch("rancher/request",{url:`/v3/roleTemplateBindings/${o[0].id}`,method:"DELETE"})}catch(r){throw D.error(`Failed to remove role ${t} from user ${e}:`,r),new Error("Unable to remove role from user")}}}function R(e){return new A(e)}var P=a(4364);function T(){const e=(0,B.Pj)(),t=R(e),a=(0,r.ref)([]),o=(0,r.ref)([]),l=(0,r.ref)([]),n=(0,r.ref)([]),s=(0,r.ref)(!1),d=(0,r.ref)(!1),i=(0,r.ref)(!1),c=(0,r.ref)(null),u=(0,r.ref)(null),p=(0,r.ref)(null),m=(0,r.computed)(()=>{const e=t.getCurrentUser();return P.log("ðŸ” [useAuth] Current user computed:",e),e}),v=(0,r.computed)(()=>{const e=t.hasAdminPrivileges();return P.log("ðŸ” [useAuth] Admin privileges computed:",e),e}),b=(0,r.computed)(()=>{const e=!!m.value;return P.log("ðŸ” [useAuth] Is authenticated computed:",e),e}),g=(0,r.computed)(()=>({currentUser:m.value,hasAdminPrivileges:v.value,isAuthenticated:b.value,availableGetters:Object.keys(e.getters).filter(e=>e.includes("auth")||e.includes("user")||e.includes("principal")),storeState:{auth:e.state.auth,management:e.state.management?.auth}})),f=async()=>{s.value=!0,c.value=null;try{a.value=await t.getUsers()}catch(e){c.value=e.message||"Failed to load users",P.error("Error loading users:",e)}finally{s.value=!1}},h=async e=>{try{return await t.getUser(e)}catch(a){throw P.error(`Error loading user ${e}:`,a),a}},y=async(e,r)=>{try{const o=await t.updateUser(e,r),l=a.value.findIndex(t=>t.id===e);return-1!==l&&(a.value[l]=o),o}catch(o){throw P.error(`Error updating user ${e}:`,o),o}},k=async()=>{d.value=!0,u.value=null;try{const[e,a,r]=await Promise.all([t.getGlobalRoles(),t.getClusterRoles(),t.getProjectRoles()]);o.value=[...e,...a,...r]}catch(e){u.value=e.message||"Failed to load roles",P.error("Error loading roles:",e)}finally{d.value=!1}},x=async e=>{try{return await t.getRole(e)}catch(a){throw P.error(`Error loading role ${e}:`,a),a}},E=async(e,t)=>{try{const a=o.value.find(t=>t.id===e);if(!a)throw new Error("Role not found");const r={...a,...t},l=o.value.findIndex(t=>t.id===e);return-1!==l&&(o.value[l]=r),r}catch(a){throw P.error(`Error updating role ${e}:`,a),a}},N=async()=>{i.value=!0,p.value=null;try{l.value=await t.getAuthProviders()}catch(e){p.value=e.message||"Failed to load auth providers",P.error("Error loading auth providers:",e)}finally{i.value=!1}},V=async()=>{try{n.value=await t.getAccessibleClusters()}catch(e){P.error("Error loading cluster access:",e),n.value=[]}},w=async e=>{try{return await t.getUserPermissions(e)}catch(a){throw P.error(`Error loading permissions for user ${e}:`,a),a}},D=async(e,a,r)=>{try{await t.assignRoleToUser(e,a,r)}catch(o){throw P.error(`Error assigning role ${a} to user ${e}:`,o),o}},C=async(e,a,r)=>{try{await t.removeRoleFromUser(e,a,r)}catch(o){throw P.error(`Error removing role ${a} from user ${e}:`,o),o}},S=e=>n.value.some(t=>t.clusterId===e&&t.permissions.read),U=e=>n.value.some(t=>t.clusterId===e&&t.permissions.admin),A=e=>l.value.find(t=>t.type===e),T=()=>l.value.filter(e=>e.enabled);return{users:(0,r.readonly)(a),roles:(0,r.readonly)(o),authProviders:(0,r.readonly)(l),clusterAccess:(0,r.readonly)(n),loadingUsers:(0,r.readonly)(s),loadingRoles:(0,r.readonly)(d),loadingProviders:(0,r.readonly)(i),usersError:(0,r.readonly)(c),rolesError:(0,r.readonly)(u),providersError:(0,r.readonly)(p),currentUser:m,hasAdminPrivileges:v,isAuthenticated:b,loadUsers:f,getUserDetails:h,updateUser:y,loadRoles:k,getRoleDetails:x,updateRole:E,loadAuthProviders:N,loadClusterAccess:V,getUserPermissions:w,assignRoleToUser:D,removeRoleFromUser:C,canAccessCluster:S,canManageCluster:U,getAuthProviderByType:A,getEnabledAuthProviders:T,debugInfo:g}}const I={class:"users-table-container"},M={class:"table-header"},j={class:"table-actions"},z={key:0,class:"loading-state"},F={key:1,class:"error-state"},L={class:"error-message"},$={key:2,class:"empty-state"},_={key:3,class:"table-wrapper"},O={class:"users-table"},G={key:0,class:"sort-indicator"},q={key:0,class:"sort-indicator"},Q={key:0,class:"sort-indicator"},J={key:0,class:"sort-indicator"},Y=["onClick"],H={class:"actions-cell"},K=["onClick"],W=["onClick"],X={key:0,class:"pagination"},Z=["disabled"],ee={class:"page-info"},te=["disabled"];function ae(e,t,a,o,l,n){return(0,r.openBlock)(),(0,r.createElementBlock)("div",I,[(0,r.createElementVNode)("div",M,[t[9]||(t[9]=(0,r.createElementVNode)("h3",null,"Users",-1)),(0,r.createElementVNode)("div",j,[(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchQuery=t),type:"search",placeholder:"Search users...",class:"search-input"},null,512),[[r.vModelText,e.searchQuery]]),e.canManageUsers?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"btn btn-primary",onClick:t[1]||(t[1]=t=>e.$emit("add-user"))}," Add User ")):(0,r.createCommentVNode)("",!0)])]),e.loading?((0,r.openBlock)(),(0,r.createElementBlock)("div",z,t[10]||(t[10]=[(0,r.createElementVNode)("div",{class:"loading-spinner"},null,-1),(0,r.createElementVNode)("p",null,"Loading users...",-1)]))):e.error?((0,r.openBlock)(),(0,r.createElementBlock)("div",F,[(0,r.createElementVNode)("p",L,(0,r.toDisplayString)(e.error),1),(0,r.createElementVNode)("button",{class:"btn btn-secondary",onClick:t[2]||(t[2]=t=>e.$emit("retry"))},"Retry")])):0===e.filteredUsers.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",$,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.searchQuery?"No users found matching your search.":"No users available."),1)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",_,[(0,r.createElementVNode)("table",O,[(0,r.createElementVNode)("thead",null,[(0,r.createElementVNode)("tr",null,[(0,r.createElementVNode)("th",{onClick:t[3]||(t[3]=t=>e.sortBy("username")),class:"sortable"},[t[11]||(t[11]=(0,r.createTextVNode)(" Username ",-1)),"username"===e.sortField?((0,r.openBlock)(),(0,r.createElementBlock)("span",G,(0,r.toDisplayString)("asc"===e.sortDirection?"â†‘":"â†“"),1)):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("th",{onClick:t[4]||(t[4]=t=>e.sortBy("displayName")),class:"sortable"},[t[12]||(t[12]=(0,r.createTextVNode)(" Display Name ",-1)),"displayName"===e.sortField?((0,r.openBlock)(),(0,r.createElementBlock)("span",q,(0,r.toDisplayString)("asc"===e.sortDirection?"â†‘":"â†“"),1)):(0,r.createCommentVNode)("",!0)]),t[15]||(t[15]=(0,r.createElementVNode)("th",null,"Provider",-1)),(0,r.createElementVNode)("th",{onClick:t[5]||(t[5]=t=>e.sortBy("enabled")),class:"sortable"},[t[13]||(t[13]=(0,r.createTextVNode)(" Status ",-1)),"enabled"===e.sortField?((0,r.openBlock)(),(0,r.createElementBlock)("span",Q,(0,r.toDisplayString)("asc"===e.sortDirection?"â†‘":"â†“"),1)):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("th",{onClick:t[6]||(t[6]=t=>e.sortBy("lastLogin")),class:"sortable"},[t[14]||(t[14]=(0,r.createTextVNode)(" Last Login ",-1)),"lastLogin"===e.sortField?((0,r.openBlock)(),(0,r.createElementBlock)("span",J,(0,r.toDisplayString)("asc"===e.sortDirection?"â†‘":"â†“"),1)):(0,r.createCommentVNode)("",!0)]),t[16]||(t[16]=(0,r.createElementVNode)("th",null,"Actions",-1))])]),(0,r.createElementVNode)("tbody",null,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.paginatedUsers,t=>((0,r.openBlock)(),(0,r.createElementBlock)("tr",{key:t.id,class:"user-row",onClick:a=>e.handleRowClick(t)},[(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(t.username),1),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(t.displayName||t.username),1),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.getAuthProvider(t)),1),(0,r.createElementVNode)("td",null,[(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["status-badge",{"status-enabled":t.enabled,"status-disabled":!t.enabled}])},(0,r.toDisplayString)(t.enabled?"Enabled":"Disabled"),3)]),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.formatLastLogin(t.lastLogin)),1),(0,r.createElementVNode)("td",H,[(0,r.createElementVNode)("button",{class:"btn btn-sm btn-outline",onClick:(0,r.withModifiers)(a=>e.$emit("view-user",t.id),["stop"]),title:"View Details"}," View ",8,K),e.canManageUsers?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"btn btn-sm btn-outline",onClick:(0,r.withModifiers)(a=>e.$emit("edit-user",t.id),["stop"]),title:"Edit User"}," Edit ",8,W)):(0,r.createCommentVNode)("",!0)])],8,Y))),128))])]),e.totalPages>1?((0,r.openBlock)(),(0,r.createElementBlock)("div",X,[(0,r.createElementVNode)("button",{class:"btn btn-sm",disabled:1===e.currentPage,onClick:t[7]||(t[7]=t=>e.currentPage--)}," Previous ",8,Z),(0,r.createElementVNode)("span",ee," Page "+(0,r.toDisplayString)(e.currentPage)+" of "+(0,r.toDisplayString)(e.totalPages),1),(0,r.createElementVNode)("button",{class:"btn btn-sm",disabled:e.currentPage===e.totalPages,onClick:t[8]||(t[8]=t=>e.currentPage++)}," Next ",8,te)])):(0,r.createCommentVNode)("",!0)]))])}var re=(0,r.defineComponent)({name:"UsersTable",props:{users:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},error:{type:String,default:null},canManageUsers:{type:Boolean,default:!1}},emits:["view-user","edit-user","add-user","retry"],setup(e,{emit:t}){const a=(0,r.ref)(""),o=(0,r.ref)("username"),l=(0,r.ref)("asc"),n=(0,r.ref)(1),s=(0,r.ref)(10),d=(0,r.computed)(()=>{let t=[...e.users];if(a.value){const e=a.value.toLowerCase();t=t.filter(t=>t.username.toLowerCase().includes(e)||t.displayName&&t.displayName.toLowerCase().includes(e))}return t.sort((e,t)=>{let a=e[o.value],r=t[o.value];return"lastLogin"===o.value?(a=a?new Date(a).getTime():0,r=r?new Date(r).getTime():0):"displayName"===o.value&&(a=a||e.username,r=r||t.username),a<r?"asc"===l.value?-1:1:a>r?"asc"===l.value?1:-1:0}),t}),i=(0,r.computed)(()=>{const e=(n.value-1)*s.value,t=e+s.value;return d.value.slice(e,t)}),c=(0,r.computed)(()=>Math.ceil(d.value.length/s.value));(0,r.watch)([a,o,l],()=>{n.value=1});const u=e=>{o.value===e?l.value="asc"===l.value?"desc":"asc":(o.value=e,l.value="asc")},p=e=>{const t=e.principalIds.find(e=>e.includes(":"));if(!t)return"Local";const a=t.split(":");if(a.length>=2){const e=a[1];return e.charAt(0).toUpperCase()+e.slice(1)}return"Local"},m=e=>{if(!e)return"Never";const t=new Date(e),a=new Date,r=a.getTime()-t.getTime(),o=Math.floor(r/864e5);return 0===o?"Today":1===o?"Yesterday":o<7?`${o} days ago`:t.toLocaleDateString()},v=e=>{t("view-user",e.id)};return{searchQuery:a,sortField:o,sortDirection:l,currentPage:n,pageSize:s,filteredUsers:d,paginatedUsers:i,totalPages:c,sortBy:u,getAuthProvider:p,formatLastLogin:m,handleRowClick:v}}}),oe=(a(6491),a(7433));const le=(0,oe.A)(re,[["render",ae],["__scopeId","data-v-7739c31d"]]);var ne=le;const se={class:"roles-table-container"},de={class:"table-header"},ie={class:"table-actions"},ce={key:0,class:"loading-state"},ue={key:1,class:"error-state"},pe={class:"error-message"},me={key:2,class:"empty-state"},ve={key:3,class:"table-wrapper"},be={class:"roles-table"},ge={key:0,class:"sort-indicator"},fe={key:0,class:"sort-indicator"},he={key:0,class:"sort-indicator"},ye={key:0,class:"sort-indicator"},ke=["onClick"],xe={class:"actions-cell"},Ee=["onClick"],Ne=["onClick"],Ve={key:0,class:"pagination"},we=["disabled"],Be={class:"page-info"},De=["disabled"];function Ce(e,t,a,o,l,n){return(0,r.openBlock)(),(0,r.createElementBlock)("div",se,[(0,r.createElementVNode)("div",de,[t[11]||(t[11]=(0,r.createElementVNode)("h3",null,"Roles",-1)),(0,r.createElementVNode)("div",ie,[(0,r.withDirectives)((0,r.createElementVNode)("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.typeFilter=t),class:"filter-select"},t[10]||(t[10]=[(0,r.createStaticVNode)('<option value="" data-v-605320f5>All Types</option><option value="global" data-v-605320f5>Global</option><option value="cluster" data-v-605320f5>Cluster</option><option value="project" data-v-605320f5>Project</option><option value="namespaced" data-v-605320f5>Namespaced</option>',5)]),512),[[r.vModelSelect,e.typeFilter]]),(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.searchQuery=t),type:"search",placeholder:"Search roles...",class:"search-input"},null,512),[[r.vModelText,e.searchQuery]]),e.canManageRoles?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"btn btn-primary",onClick:t[2]||(t[2]=t=>e.$emit("add-role"))}," Add Role ")):(0,r.createCommentVNode)("",!0)])]),e.loading?((0,r.openBlock)(),(0,r.createElementBlock)("div",ce,t[12]||(t[12]=[(0,r.createElementVNode)("div",{class:"loading-spinner"},null,-1),(0,r.createElementVNode)("p",null,"Loading roles...",-1)]))):e.error?((0,r.openBlock)(),(0,r.createElementBlock)("div",ue,[(0,r.createElementVNode)("p",pe,(0,r.toDisplayString)(e.error),1),(0,r.createElementVNode)("button",{class:"btn btn-secondary",onClick:t[3]||(t[3]=t=>e.$emit("retry"))},"Retry")])):0===e.filteredRoles.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",me,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.searchQuery||e.typeFilter?"No roles found matching your filters.":"No roles available."),1)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",ve,[(0,r.createElementVNode)("table",be,[(0,r.createElementVNode)("thead",null,[(0,r.createElementVNode)("tr",null,[(0,r.createElementVNode)("th",{onClick:t[4]||(t[4]=t=>e.sortBy("name")),class:"sortable"},[t[13]||(t[13]=(0,r.createTextVNode)(" Name ",-1)),"name"===e.sortField?((0,r.openBlock)(),(0,r.createElementBlock)("span",ge,(0,r.toDisplayString)("asc"===e.sortDirection?"â†‘":"â†“"),1)):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("th",{onClick:t[5]||(t[5]=t=>e.sortBy("displayName")),class:"sortable"},[t[14]||(t[14]=(0,r.createTextVNode)(" Display Name ",-1)),"displayName"===e.sortField?((0,r.openBlock)(),(0,r.createElementBlock)("span",fe,(0,r.toDisplayString)("asc"===e.sortDirection?"â†‘":"â†“"),1)):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("th",{onClick:t[6]||(t[6]=t=>e.sortBy("type")),class:"sortable"},[t[15]||(t[15]=(0,r.createTextVNode)(" Type ",-1)),"type"===e.sortField?((0,r.openBlock)(),(0,r.createElementBlock)("span",he,(0,r.toDisplayString)("asc"===e.sortDirection?"â†‘":"â†“"),1)):(0,r.createCommentVNode)("",!0)]),t[17]||(t[17]=(0,r.createElementVNode)("th",null,"Rules",-1)),(0,r.createElementVNode)("th",{onClick:t[7]||(t[7]=t=>e.sortBy("created")),class:"sortable"},[t[16]||(t[16]=(0,r.createTextVNode)(" Created ",-1)),"created"===e.sortField?((0,r.openBlock)(),(0,r.createElementBlock)("span",ye,(0,r.toDisplayString)("asc"===e.sortDirection?"â†‘":"â†“"),1)):(0,r.createCommentVNode)("",!0)]),t[18]||(t[18]=(0,r.createElementVNode)("th",null,"Actions",-1))])]),(0,r.createElementVNode)("tbody",null,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.paginatedRoles,t=>((0,r.openBlock)(),(0,r.createElementBlock)("tr",{key:t.id,class:"role-row",onClick:a=>e.handleRowClick(t)},[(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(t.name),1),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(t.displayName||t.name),1),(0,r.createElementVNode)("td",null,[(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["type-badge",`type-${t.type}`])},(0,r.toDisplayString)(e.formatRoleType(t.type)),3)]),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.getRulesSummary(t.rules)),1),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.formatCreatedDate(t.created)),1),(0,r.createElementVNode)("td",xe,[(0,r.createElementVNode)("button",{class:"btn btn-sm btn-outline",onClick:(0,r.withModifiers)(a=>e.$emit("view-role",t.id),["stop"]),title:"View Details"}," View ",8,Ee),e.canManageRoles?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"btn btn-sm btn-outline",onClick:(0,r.withModifiers)(a=>e.$emit("edit-role",t.id),["stop"]),title:"Edit Role"}," Edit ",8,Ne)):(0,r.createCommentVNode)("",!0)])],8,ke))),128))])]),e.totalPages>1?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ve,[(0,r.createElementVNode)("button",{class:"btn btn-sm",disabled:1===e.currentPage,onClick:t[8]||(t[8]=t=>e.currentPage--)}," Previous ",8,we),(0,r.createElementVNode)("span",Be," Page "+(0,r.toDisplayString)(e.currentPage)+" of "+(0,r.toDisplayString)(e.totalPages),1),(0,r.createElementVNode)("button",{class:"btn btn-sm",disabled:e.currentPage===e.totalPages,onClick:t[9]||(t[9]=t=>e.currentPage++)}," Next ",8,De)])):(0,r.createCommentVNode)("",!0)]))])}var Se=(0,r.defineComponent)({name:"RolesTable",props:{roles:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},error:{type:String,default:null},canManageRoles:{type:Boolean,default:!1}},emits:["view-role","edit-role","add-role","retry"],setup(e,{emit:t}){const a=(0,r.ref)(""),o=(0,r.ref)(""),l=(0,r.ref)("name"),n=(0,r.ref)("asc"),s=(0,r.ref)(1),d=(0,r.ref)(10),i=(0,r.computed)(()=>{let t=[...e.roles];if(o.value&&(t=t.filter(e=>e.type===o.value)),a.value){const e=a.value.toLowerCase();t=t.filter(t=>t.name.toLowerCase().includes(e)||t.displayName&&t.displayName.toLowerCase().includes(e))}return t.sort((e,t)=>{let a=e[l.value],r=t[l.value];return"created"===l.value?(a=a?new Date(a).getTime():0,r=r?new Date(r).getTime():0):"displayName"===l.value&&(a=a||e.name,r=r||t.name),a<r?"asc"===n.value?-1:1:a>r?"asc"===n.value?1:-1:0}),t}),c=(0,r.computed)(()=>{const e=(s.value-1)*d.value,t=e+d.value;return i.value.slice(e,t)}),u=(0,r.computed)(()=>Math.ceil(i.value.length/d.value));(0,r.watch)([a,o,l,n],()=>{s.value=1});const p=e=>{l.value===e?n.value="asc"===n.value?"desc":"asc":(l.value=e,n.value="asc")},m=e=>e.charAt(0).toUpperCase()+e.slice(1),v=e=>{if(!e||0===e.length)return"No rules";const t=e.length,a=new Set,r=new Set;return e.forEach(e=>{e.verbs&&e.verbs.forEach(e=>a.add(e)),e.resources&&e.resources.forEach(e=>r.add(e))}),`${t} rule${t>1?"s":""} (${a.size} verbs, ${r.size} resources)`},b=e=>{if(!e)return"Unknown";const t=new Date(e);return t.toLocaleDateString()},g=e=>{t("view-role",e.id)};return{searchQuery:a,typeFilter:o,sortField:l,sortDirection:n,currentPage:s,pageSize:d,filteredRoles:i,paginatedRoles:c,totalPages:u,sortBy:p,formatRoleType:m,getRulesSummary:v,formatCreatedDate:b,handleRowClick:g}}});a(5482);const Ue=(0,oe.A)(Se,[["render",Ce],["__scopeId","data-v-605320f5"]]);var Ae=Ue;const Re={class:"modal-header"},Pe={class:"modal-body"},Te={class:"form-group"},Ie=["disabled"],Me={class:"form-group"},je={class:"form-group"},ze={class:"form-group"},Fe={class:"checkbox-label"},Le={key:1,class:"user-details"},$e={class:"detail-section"},_e={class:"detail-grid"},Oe={class:"detail-item"},Ge={class:"detail-item"},qe={class:"detail-item"},Qe={class:"detail-item"},Je={class:"detail-item"},Ye={class:"detail-item"},He={key:0,class:"detail-section"},Ke={class:"detail-section"},We={key:0,class:"principal-ids"},Xe={key:1,class:"no-data"},Ze={key:1,class:"detail-section"},et={class:"permissions-summary"},tt={key:0,class:"permission-group"},at={key:0},rt={key:1,class:"permission-group"},ot={key:2,class:"permission-group"},lt={class:"modal-footer"},nt=["disabled"];function st(e,t,a,o,l,n){return e.show?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:t[10]||(t[10]=(...t)=>e.handleOverlayClick&&e.handleOverlayClick(...t))},[(0,r.createElementVNode)("div",{class:"modal-content",onClick:t[9]||(t[9]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("div",Re,[(0,r.createElementVNode)("h2",null,(0,r.toDisplayString)(e.isEditing?"Edit User":"User Details"),1),(0,r.createElementVNode)("button",{class:"close-btn",onClick:t[0]||(t[0]=t=>e.$emit("close")),"aria-label":"Close modal"}," Ã— ")]),(0,r.createElementVNode)("div",Pe,[e.isEditing&&e.formData?((0,r.openBlock)(),(0,r.createElementBlock)("form",{key:0,onSubmit:t[5]||(t[5]=(0,r.withModifiers)((...t)=>e.handleSave&&e.handleSave(...t),["prevent"])),class:"user-form"},[(0,r.createElementVNode)("div",Te,[t[11]||(t[11]=(0,r.createElementVNode)("label",{for:"username"},"Username *",-1)),(0,r.withDirectives)((0,r.createElementVNode)("input",{id:"username","onUpdate:modelValue":t[1]||(t[1]=t=>e.formData.username=t),type:"text",required:"",disabled:!e.canEditUsername,class:"form-input"},null,8,Ie),[[r.vModelText,e.formData.username]])]),(0,r.createElementVNode)("div",Me,[t[12]||(t[12]=(0,r.createElementVNode)("label",{for:"displayName"},"Display Name",-1)),(0,r.withDirectives)((0,r.createElementVNode)("input",{id:"displayName","onUpdate:modelValue":t[2]||(t[2]=t=>e.formData.displayName=t),type:"text",class:"form-input"},null,512),[[r.vModelText,e.formData.displayName]])]),(0,r.createElementVNode)("div",je,[t[13]||(t[13]=(0,r.createElementVNode)("label",{for:"description"},"Description",-1)),(0,r.withDirectives)((0,r.createElementVNode)("textarea",{id:"description","onUpdate:modelValue":t[3]||(t[3]=t=>e.formData.description=t),rows:"3",class:"form-input",placeholder:"Optional description for this user"},null,512),[[r.vModelText,e.formData.description]])]),(0,r.createElementVNode)("div",ze,[(0,r.createElementVNode)("label",Fe,[(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.formData.enabled=t),type:"checkbox",class:"form-checkbox"},null,512),[[r.vModelCheckbox,e.formData.enabled]]),t[14]||(t[14]=(0,r.createElementVNode)("span",null,"Account Enabled",-1))])])],32)):((0,r.openBlock)(),(0,r.createElementBlock)("div",Le,[(0,r.createElementVNode)("div",$e,[t[21]||(t[21]=(0,r.createElementVNode)("h3",null,"Basic Information",-1)),(0,r.createElementVNode)("div",_e,[(0,r.createElementVNode)("div",Oe,[t[15]||(t[15]=(0,r.createElementVNode)("label",null,"Username:",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.user?.username),1)]),(0,r.createElementVNode)("div",Ge,[t[16]||(t[16]=(0,r.createElementVNode)("label",null,"Display Name:",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.user?.displayName||e.user?.username),1)]),(0,r.createElementVNode)("div",qe,[t[17]||(t[17]=(0,r.createElementVNode)("label",null,"Status:",-1)),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["status-badge",{enabled:e.user?.enabled,disabled:!e.user?.enabled}])},(0,r.toDisplayString)(e.user?.enabled?"Enabled":"Disabled"),3)]),(0,r.createElementVNode)("div",Qe,[t[18]||(t[18]=(0,r.createElementVNode)("label",null,"Created:",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.formatDate(e.user?.created)),1)]),(0,r.createElementVNode)("div",Je,[t[19]||(t[19]=(0,r.createElementVNode)("label",null,"Last Login:",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.user?.lastLogin?e.formatDate(e.user?.lastLogin):"Never"),1)]),(0,r.createElementVNode)("div",Ye,[t[20]||(t[20]=(0,r.createElementVNode)("label",null,"Auth Provider:",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.getAuthProvider(e.user)),1)])])]),e.user?.description?((0,r.openBlock)(),(0,r.createElementBlock)("div",He,[t[22]||(t[22]=(0,r.createElementVNode)("h3",null,"Description",-1)),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.user.description),1)])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",Ke,[t[23]||(t[23]=(0,r.createElementVNode)("h3",null,"Principal IDs",-1)),e.user?.principalIds?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",We,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.user.principalIds,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e,class:"principal-id"},(0,r.toDisplayString)(e),1))),128))])):((0,r.openBlock)(),(0,r.createElementBlock)("p",Xe,"No principal IDs available"))]),e.userPermissions?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ze,[t[27]||(t[27]=(0,r.createElementVNode)("h3",null,"Permissions",-1)),(0,r.createElementVNode)("div",et,[e.userPermissions.global.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",tt,[t[24]||(t[24]=(0,r.createElementVNode)("h4",null,"Global Permissions",-1)),(0,r.createElementVNode)("ul",null,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.userPermissions.global.slice(0,5),e=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{key:e.resource},(0,r.toDisplayString)(e.resource)+": "+(0,r.toDisplayString)(e.verbs.join(", ")),1))),128)),e.userPermissions.global.length>5?((0,r.openBlock)(),(0,r.createElementBlock)("li",at," ... and "+(0,r.toDisplayString)(e.userPermissions.global.length-5)+" more ",1)):(0,r.createCommentVNode)("",!0)])])):(0,r.createCommentVNode)("",!0),Object.keys(e.userPermissions.cluster).length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",rt,[t[25]||(t[25]=(0,r.createElementVNode)("h4",null,"Cluster Permissions",-1)),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(Object.keys(e.userPermissions.cluster).length)+" clusters",1)])):(0,r.createCommentVNode)("",!0),Object.keys(e.userPermissions.project).length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",ot,[t[26]||(t[26]=(0,r.createElementVNode)("h4",null,"Project Permissions",-1)),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(Object.keys(e.userPermissions.project).length)+" projects",1)])):(0,r.createCommentVNode)("",!0)])])):(0,r.createCommentVNode)("",!0)]))]),(0,r.createElementVNode)("div",lt,[(0,r.createElementVNode)("button",{type:"button",class:"btn btn-secondary",onClick:t[6]||(t[6]=t=>e.$emit("close"))},(0,r.toDisplayString)(e.isEditing?"Cancel":"Close"),1),e.isEditing?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,type:"submit",class:"btn btn-primary",onClick:t[7]||(t[7]=(...t)=>e.handleSave&&e.handleSave(...t)),disabled:!e.isFormValid}," Save Changes ",8,nt)):e.canEditUser?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,type:"button",class:"btn btn-outline",onClick:t[8]||(t[8]=(...t)=>e.startEditing&&e.startEditing(...t))}," Edit User ")):(0,r.createCommentVNode)("",!0)])])])):(0,r.createCommentVNode)("",!0)}var dt=(0,r.defineComponent)({name:"UserDetailsModal",props:{user:{type:Object,default:null},show:{type:Boolean,default:!1},canEditUser:{type:Boolean,default:!1},userPermissions:{type:Object,default:null}},emits:["close","save"],setup(e,{emit:t}){const a=(0,r.ref)(!1),o=(0,r.ref)(null);(0,r.watch)(()=>e.user,e=>{e&&(o.value={...e},a.value=!1)},{immediate:!0});const l=(0,r.computed)(()=>o.value?.username?.trim()),n=(0,r.computed)(()=>!e.user?.id),s=()=>{a.value=!0},d=()=>{l.value&&o.value&&t("save",o.value)},i=e=>{e.target===e.currentTarget&&t("close")},c=e=>{if(!e)return"Unknown";const t=new Date(e);return t.toLocaleString()},u=e=>{if(!e?.principalIds?.length)return"Local";const t=e.principalIds.find(e=>e.includes(":"));if(!t)return"Local";const a=t.split(":");if(a.length>=2){const e=a[1];return e.charAt(0).toUpperCase()+e.slice(1)}return"Local"};return{isEditing:a,formData:o,isFormValid:l,canEditUsername:n,startEditing:s,handleSave:d,handleOverlayClick:i,formatDate:c,getAuthProvider:u}}});a(1518);const it=(0,oe.A)(dt,[["render",st],["__scopeId","data-v-395e4d20"]]);var ct=it;const ut={class:"modal-header"},pt={class:"modal-body"},mt={class:"form-group"},vt=["disabled"],bt={class:"form-group"},gt={class:"form-group"},ft={class:"form-group"},ht=["disabled"],yt={key:1,class:"role-details"},kt={class:"detail-section"},xt={class:"detail-grid"},Et={class:"detail-item"},Nt={class:"detail-item"},Vt={class:"detail-item"},wt={class:"detail-item"},Bt={key:0,class:"detail-section"},Dt={class:"detail-section"},Ct={key:0,class:"rules-list"},St={class:"rule-header"},Ut={class:"rule-details"},At={class:"rule-row"},Rt={class:"rule-value"},Pt={class:"rule-row"},Tt={class:"rule-value"},It={key:0,class:"rule-row"},Mt={class:"rule-value"},jt={key:1,class:"rule-row"},zt={class:"rule-value"},Ft={key:2,class:"rule-row"},Lt={class:"rule-value"},$t={key:1,class:"no-data"},_t={key:1,class:"detail-section"},Ot={class:"assigned-users"},Gt={key:0,class:"more-users"},qt={class:"modal-footer"},Qt=["disabled"];function Jt(e,t,a,o,l,n){return e.show?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:t[10]||(t[10]=(...t)=>e.handleOverlayClick&&e.handleOverlayClick(...t))},[(0,r.createElementVNode)("div",{class:"modal-content",onClick:t[9]||(t[9]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("div",ut,[(0,r.createElementVNode)("h2",null,(0,r.toDisplayString)(e.isEditing?"Edit Role":"Role Details"),1),(0,r.createElementVNode)("button",{class:"close-btn",onClick:t[0]||(t[0]=t=>e.$emit("close")),"aria-label":"Close modal"}," Ã— ")]),(0,r.createElementVNode)("div",pt,[e.isEditing&&e.formData?((0,r.openBlock)(),(0,r.createElementBlock)("form",{key:0,onSubmit:t[5]||(t[5]=(0,r.withModifiers)((...t)=>e.handleSave&&e.handleSave(...t),["prevent"])),class:"role-form"},[(0,r.createElementVNode)("div",mt,[t[11]||(t[11]=(0,r.createElementVNode)("label",{for:"name"},"Role Name *",-1)),(0,r.withDirectives)((0,r.createElementVNode)("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=t=>e.formData.name=t),type:"text",required:"",disabled:!e.canEditName,class:"form-input"},null,8,vt),[[r.vModelText,e.formData.name]])]),(0,r.createElementVNode)("div",bt,[t[12]||(t[12]=(0,r.createElementVNode)("label",{for:"displayName"},"Display Name",-1)),(0,r.withDirectives)((0,r.createElementVNode)("input",{id:"displayName","onUpdate:modelValue":t[2]||(t[2]=t=>e.formData.displayName=t),type:"text",class:"form-input"},null,512),[[r.vModelText,e.formData.displayName]])]),(0,r.createElementVNode)("div",gt,[t[13]||(t[13]=(0,r.createElementVNode)("label",{for:"description"},"Description",-1)),(0,r.withDirectives)((0,r.createElementVNode)("textarea",{id:"description","onUpdate:modelValue":t[3]||(t[3]=t=>e.formData.description=t),rows:"3",class:"form-input",placeholder:"Optional description for this role"},null,512),[[r.vModelText,e.formData.description]])]),(0,r.createElementVNode)("div",ft,[t[15]||(t[15]=(0,r.createElementVNode)("label",{for:"type"},"Role Type",-1)),(0,r.withDirectives)((0,r.createElementVNode)("select",{id:"type","onUpdate:modelValue":t[4]||(t[4]=t=>e.formData.type=t),class:"form-select",disabled:!e.canEditType},t[14]||(t[14]=[(0,r.createElementVNode)("option",{value:"global"},"Global",-1),(0,r.createElementVNode)("option",{value:"cluster"},"Cluster",-1),(0,r.createElementVNode)("option",{value:"project"},"Project",-1),(0,r.createElementVNode)("option",{value:"namespaced"},"Namespaced",-1)]),8,ht),[[r.vModelSelect,e.formData.type]])])],32)):((0,r.openBlock)(),(0,r.createElementBlock)("div",yt,[(0,r.createElementVNode)("div",kt,[t[20]||(t[20]=(0,r.createElementVNode)("h3",null,"Basic Information",-1)),(0,r.createElementVNode)("div",xt,[(0,r.createElementVNode)("div",Et,[t[16]||(t[16]=(0,r.createElementVNode)("label",null,"Name:",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.role?.name),1)]),(0,r.createElementVNode)("div",Nt,[t[17]||(t[17]=(0,r.createElementVNode)("label",null,"Display Name:",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.role?.displayName||e.role?.name),1)]),(0,r.createElementVNode)("div",Vt,[t[18]||(t[18]=(0,r.createElementVNode)("label",null,"Type:",-1)),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["type-badge",`type-${e.role?.type}`])},(0,r.toDisplayString)(e.formatRoleType(e.role?.type)),3)]),(0,r.createElementVNode)("div",wt,[t[19]||(t[19]=(0,r.createElementVNode)("label",null,"Created:",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.formatDate(e.role?.created)),1)])])]),e.role?.description?((0,r.openBlock)(),(0,r.createElementBlock)("div",Bt,[t[21]||(t[21]=(0,r.createElementVNode)("h3",null,"Description",-1)),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.role.description),1)])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",Dt,[t[27]||(t[27]=(0,r.createElementVNode)("h3",null,"Permissions (Rules)",-1)),e.role?.rules?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ct,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.role.rules,(e,a)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:a,class:"rule-item"},[(0,r.createElementVNode)("div",St,[(0,r.createElementVNode)("strong",null,"Rule "+(0,r.toDisplayString)(a+1),1)]),(0,r.createElementVNode)("div",Ut,[(0,r.createElementVNode)("div",At,[t[22]||(t[22]=(0,r.createElementVNode)("span",{class:"rule-label"},"Verbs:",-1)),(0,r.createElementVNode)("span",Rt,(0,r.toDisplayString)(e.verbs?.join(", ")||"None"),1)]),(0,r.createElementVNode)("div",Pt,[t[23]||(t[23]=(0,r.createElementVNode)("span",{class:"rule-label"},"API Groups:",-1)),(0,r.createElementVNode)("span",Tt,(0,r.toDisplayString)(e.apiGroups?.join(", ")||"None"),1)]),e.resources?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",It,[t[24]||(t[24]=(0,r.createElementVNode)("span",{class:"rule-label"},"Resources:",-1)),(0,r.createElementVNode)("span",Mt,(0,r.toDisplayString)(e.resources.join(", ")),1)])):(0,r.createCommentVNode)("",!0),e.resourceNames?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",jt,[t[25]||(t[25]=(0,r.createElementVNode)("span",{class:"rule-label"},"Resource Names:",-1)),(0,r.createElementVNode)("span",zt,(0,r.toDisplayString)(e.resourceNames.join(", ")),1)])):(0,r.createCommentVNode)("",!0),e.nonResourceURLs?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ft,[t[26]||(t[26]=(0,r.createElementVNode)("span",{class:"rule-label"},"Non-Resource URLs:",-1)),(0,r.createElementVNode)("span",Lt,(0,r.toDisplayString)(e.nonResourceURLs.join(", ")),1)])):(0,r.createCommentVNode)("",!0)])]))),128))])):((0,r.openBlock)(),(0,r.createElementBlock)("p",$t,"No rules defined for this role"))]),e.assignedUsers?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",_t,[t[28]||(t[28]=(0,r.createElementVNode)("h3",null,"Assigned Users",-1)),(0,r.createElementVNode)("div",Ot,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.assignedUsers.slice(0,10),e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.id,class:"assigned-user"},(0,r.toDisplayString)(e.displayName||e.username),1))),128)),e.assignedUsers.length>10?((0,r.openBlock)(),(0,r.createElementBlock)("div",Gt," ... and "+(0,r.toDisplayString)(e.assignedUsers.length-10)+" more users ",1)):(0,r.createCommentVNode)("",!0)])])):(0,r.createCommentVNode)("",!0)]))]),(0,r.createElementVNode)("div",qt,[(0,r.createElementVNode)("button",{type:"button",class:"btn btn-secondary",onClick:t[6]||(t[6]=t=>e.$emit("close"))},(0,r.toDisplayString)(e.isEditing?"Cancel":"Close"),1),e.isEditing?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,type:"submit",class:"btn btn-primary",onClick:t[7]||(t[7]=(...t)=>e.handleSave&&e.handleSave(...t)),disabled:!e.isFormValid}," Save Changes ",8,Qt)):e.canEditRole?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,type:"button",class:"btn btn-outline",onClick:t[8]||(t[8]=(...t)=>e.startEditing&&e.startEditing(...t))}," Edit Role ")):(0,r.createCommentVNode)("",!0)])])])):(0,r.createCommentVNode)("",!0)}var Yt=(0,r.defineComponent)({name:"RoleDetailsModal",props:{role:{type:Object,default:null},show:{type:Boolean,default:!1},canEditRole:{type:Boolean,default:!1},assignedUsers:{type:Array,default:()=>[]}},emits:["close","save"],setup(e,{emit:t}){const a=(0,r.ref)(!1),o=(0,r.ref)(null);(0,r.watch)(()=>e.role,e=>{e&&(o.value={...e},a.value=!1)},{immediate:!0});const l=(0,r.computed)(()=>o.value?.name?.trim()),n=(0,r.computed)(()=>!e.role?.id),s=(0,r.computed)(()=>!e.role?.id),d=()=>{a.value=!0},i=()=>{l.value&&o.value&&t("save",o.value)},c=e=>{e.target===e.currentTarget&&t("close")},u=e=>{if(!e)return"Unknown";const t=new Date(e);return t.toLocaleString()},p=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown";return{isEditing:a,formData:o,isFormValid:l,canEditName:n,canEditType:s,startEditing:d,handleSave:i,handleOverlayClick:c,formatDate:u,formatRoleType:p}}});a(6316);const Ht=(0,oe.A)(Yt,[["render",Jt],["__scopeId","data-v-b7f498e2"]]);var Kt=Ht,Wt=a(4364),Xt=(0,r.defineComponent)({name:"Settings",components:{UsersTable:ne,RolesTable:Ae,UserDetailsModal:ct,RoleDetailsModal:Kt},setup(){(0,B.Pj)();const e=(0,r.ref)("users"),t=[{id:"users",label:"Users"},{id:"roles",label:"Roles"}],a=(0,r.ref)(!1),o=(0,r.ref)(!1),l=(0,r.ref)(null),n=(0,r.ref)(null),{users:s,roles:d,loadingUsers:i,loadingRoles:c,usersError:u,rolesError:p,currentUser:m,hasAdminPrivileges:v,isAuthenticated:b,loadUsers:g,loadRoles:f,getUserDetails:h,getRoleDetails:y,updateUser:k,updateRole:x,loadClusterAccess:E,canAccessCluster:N,canManageCluster:V,debugInfo:w}=T();(0,r.onMounted)(async()=>{v.value&&await Promise.all([g(),f(),E()])});const D=async e=>{try{const t=await h(e);l.value=t,a.value=!0}catch(t){Wt.error("Failed to load user details:",t)}},C=e=>{D(e)},S=async e=>{try{const t=await y(e);n.value=t,o.value=!0}catch(t){Wt.error("Failed to load role details:",t)}},U=e=>{S(e)},A=async e=>{try{await k(e.id,e),a.value=!1,await g()}catch(t){Wt.error("Failed to save user:",t)}},R=async e=>{try{await x(e.id,e),o.value=!1,await f()}catch(t){Wt.error("Failed to save role:",t)}},P=()=>{alert("User creation functionality would be implemented here")},I=()=>{alert("Role creation functionality would be implemented here")};return{activeTab:e,tabs:t,showUserModal:a,showRoleModal:o,selectedUser:l,selectedRole:n,users:s,roles:d,loadingUsers:i,loadingRoles:c,usersError:u,rolesError:p,currentUser:m,hasAdminPrivileges:v,isAuthenticated:b,debugInfo:w,handleViewUser:D,handleEditUser:C,handleViewRole:S,handleEditRole:U,handleSaveUser:A,handleSaveRole:R,handleAddUser:P,handleAddRole:I,loadUsers:g,loadRoles:f}}});a(1670);const Zt=(0,oe.A)(Xt,[["render",w],["__scopeId","data-v-4be39728"]]);var ea=Zt},5482:function(e,t,a){var r=a(9814);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(4825).A;o("74caf0c2",r,!0,{sourceMap:!1,shadowMode:!1})},6089:function(e,t,a){"use strict";a.r(t);var r=a(6758),o=a.n(r),l=a(935),n=a.n(l),s=n()(o());s.push([e.id,".modal-overlay[data-v-395e4d20]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[data-v-395e4d20]{background:var(--card-bg);border-radius:8px;box-shadow:var(--card-shadow);max-width:600px;width:100%;max-height:90vh;overflow:hidden;display:flex;flex-direction:column}.modal-header[data-v-395e4d20]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid var(--border)}.modal-header h2[data-v-395e4d20]{margin:0;color:var(--text)}.close-btn[data-v-395e4d20]{background:none;border:none;font-size:24px;cursor:pointer;color:var(--text-muted);padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color .2s}.close-btn[data-v-395e4d20]:hover{background:var(--hover-bg);color:var(--text)}.modal-body[data-v-395e4d20]{padding:20px;overflow-y:auto;flex:1}.modal-footer[data-v-395e4d20]{padding:20px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:10px}.user-details[data-v-395e4d20]{display:flex;flex-direction:column;gap:24px}.detail-section h3[data-v-395e4d20]{margin:0 0 16px 0;color:var(--text);font-size:16px;font-weight:600}.detail-grid[data-v-395e4d20]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.detail-item[data-v-395e4d20]{display:flex;flex-direction:column;gap:4px}.detail-item label[data-v-395e4d20]{font-weight:500;color:var(--text-muted);font-size:14px}.detail-item span[data-v-395e4d20]{color:var(--text)}.status-badge[data-v-395e4d20]{display:inline-block;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.status-badge.enabled[data-v-395e4d20]{background:var(--success-bg);color:var(--success)}.status-badge.disabled[data-v-395e4d20]{background:var(--error-bg);color:var(--error)}.principal-ids[data-v-395e4d20]{display:flex;flex-direction:column;gap:8px}.principal-id[data-v-395e4d20]{background:var(--input-bg);padding:8px 12px;border-radius:4px;font-family:monospace;font-size:14px;color:var(--text);word-break:break-all}.permissions-summary[data-v-395e4d20]{display:flex;flex-direction:column;gap:16px}.permission-group h4[data-v-395e4d20]{margin:0 0 8px 0;color:var(--text);font-size:14px;font-weight:600}.permission-group ul[data-v-395e4d20]{margin:0;padding-left:20px}.permission-group li[data-v-395e4d20]{color:var(--text-muted);font-size:14px;margin-bottom:4px}.no-data[data-v-395e4d20]{color:var(--text-muted);font-style:italic;margin:0}.user-form[data-v-395e4d20]{gap:20px}.form-group[data-v-395e4d20],.user-form[data-v-395e4d20]{display:flex;flex-direction:column}.form-group[data-v-395e4d20]{gap:8px}.form-group label[data-v-395e4d20]{font-weight:500;color:var(--text)}.form-input[data-v-395e4d20]{padding:8px 12px;border:1px solid var(--border);border-radius:4px;background:var(--input-bg);color:var(--text);font-size:14px}.form-input[data-v-395e4d20]:focus{outline:none;border-color:var(--primary)}.form-input[data-v-395e4d20]:disabled{background:var(--disabled-bg);color:var(--text-muted);cursor:not-allowed}.checkbox-label[data-v-395e4d20]{display:flex;align-items:center;gap:8px;cursor:pointer;font-weight:400}.form-checkbox[data-v-395e4d20]{width:16px;height:16px}.btn[data-v-395e4d20]{padding:8px 16px;border:1px solid var(--border);border-radius:4px;background:var(--button-bg);color:var(--button-text);cursor:pointer;font-size:14px;transition:all .2s}.btn[data-v-395e4d20]:hover:not(:disabled){background:var(--button-hover-bg)}.btn[data-v-395e4d20]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[data-v-395e4d20]{background:var(--primary);color:#fff;border-color:var(--primary)}.btn-secondary[data-v-395e4d20]{background:var(--secondary);color:var(--secondary-text)}.btn-outline[data-v-395e4d20]{background:transparent;border-color:var(--border)}.btn-outline[data-v-395e4d20]:hover{background:var(--hover-bg)}",""]),t["default"]=s},6316:function(e,t,a){var r=a(3871);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(4825).A;o("09580f16",r,!0,{sourceMap:!1,shadowMode:!1})},6491:function(e,t,a){var r=a(16);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var o=a(4825).A;o("54c9bab6",r,!0,{sourceMap:!1,shadowMode:!1})},9814:function(e,t,a){"use strict";a.r(t);var r=a(6758),o=a.n(r),l=a(935),n=a.n(l),s=n()(o());s.push([e.id,".roles-table-container[data-v-605320f5]{width:100%}.table-header[data-v-605320f5]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.table-header h3[data-v-605320f5]{margin:0;color:var(--text)}.table-actions[data-v-605320f5]{display:flex;gap:10px;align-items:center}.filter-select[data-v-605320f5],.search-input[data-v-605320f5]{padding:8px 12px;border:1px solid var(--border);border-radius:4px;background:var(--input-bg);color:var(--text)}.filter-select[data-v-605320f5]{min-width:120px}.search-input[data-v-605320f5]{min-width:200px}.filter-select[data-v-605320f5]:focus,.search-input[data-v-605320f5]:focus{outline:none;border-color:var(--primary)}.empty-state[data-v-605320f5],.error-state[data-v-605320f5],.loading-state[data-v-605320f5]{text-align:center;padding:40px 20px;color:var(--text-muted)}.loading-spinner[data-v-605320f5]{width:24px;height:24px;border:2px solid var(--border);border-top:2px solid var(--primary);border-radius:50%;animation:spin-605320f5 1s linear infinite;margin:0 auto 10px}@keyframes spin-605320f5{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.error-message[data-v-605320f5]{color:var(--error);margin-bottom:10px}.table-wrapper[data-v-605320f5]{background:var(--card-bg);border-radius:8px;overflow:hidden;box-shadow:var(--card-shadow)}.roles-table[data-v-605320f5]{width:100%;border-collapse:collapse}.roles-table td[data-v-605320f5],.roles-table th[data-v-605320f5]{padding:12px 16px;text-align:left;border-bottom:1px solid var(--border)}.roles-table th[data-v-605320f5]{background:var(--sortable-table-header-bg);font-weight:600;color:var(--text);position:sticky;top:0}.roles-table th.sortable[data-v-605320f5]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.roles-table th.sortable[data-v-605320f5]:hover{background:var(--hover-bg)}.sort-indicator[data-v-605320f5]{margin-left:5px;font-size:12px}.role-row[data-v-605320f5]{cursor:pointer;transition:background-color .2s}.role-row[data-v-605320f5]:hover{background:var(--sortable-table-accent-bg)}.type-badge[data-v-605320f5]{padding:4px 8px;border-radius:12px;font-size:12px;font-weight:500}.type-global[data-v-605320f5]{background:var(--primary-bg);color:var(--primary)}.type-cluster[data-v-605320f5]{background:var(--warning-bg);color:var(--warning)}.type-project[data-v-605320f5]{background:var(--success-bg);color:var(--success)}.type-namespaced[data-v-605320f5]{background:var(--info-bg);color:var(--info)}.actions-cell[data-v-605320f5]{white-space:nowrap}.actions-cell .btn[data-v-605320f5]{margin-right:5px}.pagination[data-v-605320f5]{display:flex;justify-content:center;align-items:center;gap:10px;padding:16px;background:var(--card-bg);border-top:1px solid var(--border)}.page-info[data-v-605320f5]{color:var(--text-muted);font-size:14px}.btn[data-v-605320f5]{padding:6px 12px;border:1px solid var(--border);border-radius:4px;background:var(--button-bg);color:var(--button-text);cursor:pointer;font-size:14px;transition:all .2s}.btn[data-v-605320f5]:hover:not(:disabled){background:var(--button-hover-bg)}.btn[data-v-605320f5]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[data-v-605320f5]{background:var(--primary);color:#fff;border-color:var(--primary)}.btn-outline[data-v-605320f5]{background:transparent;border-color:var(--border)}.btn-outline[data-v-605320f5]:hover{background:var(--hover-bg)}.btn-sm[data-v-605320f5]{padding:4px 8px;font-size:12px}.btn-secondary[data-v-605320f5]{background:var(--secondary);color:var(--secondary-text)}",""]),t["default"]=s}}]);
//# sourceMappingURL=suseai-rancher-ext-0.1.0.umd.min.94.js.map